{% extends 'base.html' %}
{% block title %} <title>Your Order</title> {% endblock title %}
{% block style %}
<style>
  .card {
    margin-bottom: 20px; /* Add margin to the bottom of each card */
  }
</style>
</style>
{% endblock style %}
{% block body %}
{% load static %}
<!-- breadcrumb-section -->
<div class="breadcrumb-section" style="background-image: url('{% static 'assets/img/profile.jpg' %}');">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 offset-lg-2 text center">
                <div class="breadcrumb-text">
                    {% if user.is_authenticated %}
                    <h1>Good Morning!! {{user.name|title}}</h1>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end breadcrumb section -->
<div style="margin: 50px;">
    <div class="container">
        <h4>Your Orders</h4>
        <hr>
        {% for i in order %}
        <div class="card">
            <div class="card-header d-flex justify-content-between">
                <div class="col col-lg-2">
                    ORDER PLACED
                    <br><small>{{i.created_at}}</small>
                </div>
                <div class="col col-lg-2">
                    {% load custom_filters %}
                    TOTAL
                    <br>${{i.quantity|multiply:i.product.price}}
                </div>
                <div class="col">
                    DELIVER TO:
                    <br>
                    <a href="#" data-bs-toggle="tooltip" data-bs-placement="bottom"
                        title="{{i.address.full_name}}:
                        {{i.address.flat}},{{i.address.area}},
                        {{i.address.city}},{{i.address.state}},{{i.address.pincode}},
                        {{i.address.country}},
                        {{i.address.mobile}}">
                        {{i.address.full_name|title}} 
                        <i class="fas fa-angle-down" style="color: black; margin: 5px;"></i>
                    </a>
                </div>
                <div class="col col-lg-2">
                    ORDER:<small>{{i.id}}</small>
                    {% if i.status == 'Delivered' %}
                    <br><a href="{% url 'order-detail' i.id %}">View order details.</a>
                    {% else %}
                    <br><a href="{% url 'order-detail' i.id %}">View order Status.</a>
                    {% endif %}
                </div>
            </div>
            <div class="card-body d-flex">
                <div class="col col-lg-2">
                    <img src="{{i.product.image.url}}" alt="{{i.product.title}}" width="100" height="100">
                </div>
                <div class="col">
                    <h5 class="card-title">{{i.product.title}}</h5>
                    <p class="card-text">Quantity: {{i.quantity}}</p>
                    <p class="card-text">{{i.product.description}}</p>
                    <a href="{% url 'single_product' i.product.slug %}" class="btn btn-warning" style="background-color: white;
                    border-radius: 6px; border: none;
                    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);">View your item</a>
                </div>
                <div class="col col-lg-2">
                    <a href="#" class="btn btn-warning mb-2">Write Reviews</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock body %}
{% block js %}
<script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })
</script>
{% endblock js %}
